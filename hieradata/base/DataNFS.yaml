---
nfs::server: true 
nfs::exports:
   '/data':
    - host: '10.0.0.0/255.0.0.0'
      options: 'fsid=1,rw,async,no_subtree_check,no_root_squash'
      order: 1
   '/data/hadoop':
    - host: '128.8.164.13/255.255.255.0'
      options: 'fsid=1,rw,async,no_subtree_check,no_root_squash'
      order: 2
   '/data':
    - host: '128.8.164.12/255.255.255.0'
      options: 'fsid=1,rw,async,no_subtree_check,no_root_squash'
      order: 3                  
nfs::nfs_mounts:
  home:
    device: '10.1.0.1:/export/home'
    path: '/home'
    options: 'rw,async,intr,nolock,nfsvers=3'      
nfs::manage_firewall: false
# firewall::ensure: 'stopped'
firewall::ensure: 'running'
firewall_rules:
  '001 allow ssh on internal network':
    port: 22
    proto: 'tcp'
    source: '10.1.0.0/255.255.0.0'
    iniface: "em1"
    action: 'accept'
  '004 turn off ssh on public network':
    port: 22
    proto: 'tcp'
    iniface: "em2"
    action: 'reject'
   '003 allow hepcms-0 to connect for disk mount':
     iniface: "em2"
     source: '128.8.164.12/255.255.255.0'
     action: 'accept'    
  '002 allow hepcms-1 to connect for disk mount':
    iniface: "em2"
    source: '128.8.164.13/255.255.255.0'
    action: 'accept'       
extra_packages:
  - 'firefox'
  - 'xfsprogs'
  - 'xfsdump'
  - 'freeipmi'
  - 'srvadmin-idrac7'
  - 'OpenIPMI'
